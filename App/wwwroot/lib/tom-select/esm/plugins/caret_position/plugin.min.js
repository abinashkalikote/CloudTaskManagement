const accent_pat="[̀-ͯ·ʾʼ]",latin_convert={},latin_condensed={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let r in latin_condensed){let a=latin_condensed[r]||"";for(let t=0;t<a.length;t++){let e=a.substring(t,t+1);latin_convert[e]=r}}new RegExp(Object.keys(latin_convert).join("|")+"|"+accent_pat,"gu");const iterate=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var a in e)e.hasOwnProperty(a)&&t(e[a],a)},removeClasses=(e,...t)=>{var a=classesArray(t);(e=castAsArray(e)).map(t=>{a.map(e=>{t.classList.remove(e)})})},classesArray=e=>{var t=[];return iterate(e,e=>{"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},castAsArray=e=>e=Array.isArray(e)?e:[e],nodeIndex=(e,t)=>{if(!e)return-1;t=t||e.nodeName;for(var a=0;e=e.previousElementSibling;)e.matches(t)&&a++;return a};function plugin(){var r=this;r.hook("instead","setCaret",a=>{"single"!==r.settings.mode&&r.control.contains(r.control_input)?(a=Math.max(0,Math.min(r.items.length,a)))==r.caretPos||r.isPending||r.controlChildren().forEach((e,t)=>{t<a?r.control_input.insertAdjacentElement("beforebegin",e):r.control.appendChild(e)}):a=r.items.length,r.caretPos=a}),r.hook("instead","moveCaret",e=>{var t,a;r.isFocused&&((t=r.getLastActive(e))?(a=nodeIndex(t),r.setCaret(0<e?a+1:a),r.setActiveItem(),removeClasses(t,"last-active")):r.setCaret(r.caretPos+e))})}export{plugin as default};