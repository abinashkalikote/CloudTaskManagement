const hash_key=e=>null==e?null:get_hash(e),get_hash=e=>"boolean"==typeof e?e?"1":"0":e+"",preventDefault=(e,t=!1)=>{e&&(e.preventDefault(),t&&e.stopPropagation())},accent_pat="[̀-ͯ·ʾʼ]",latin_convert={},latin_condensed={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in latin_condensed){let s=latin_condensed[n]||"";for(let t=0;t<s.length;t++){let e=s.substring(t,t+1);latin_convert[e]=n}}new RegExp(Object.keys(latin_convert).join("|")+"|"+accent_pat,"gu");const getDom=e=>{return e.jquery?e[0]:e instanceof HTMLElement?e:isHtmlString(e)?((t=document.createElement("template")).innerHTML=e.trim(),t.content.firstChild):document.querySelector(e);var t},isHtmlString=e=>"string"==typeof e&&-1<e.indexOf("<");function plugin(e){var a=this,s=a.onOptionSelect;a.settings.hideSelected=!1;const c=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},e);function n(t){setTimeout(()=>{var e=t.querySelector("input."+c.className);e instanceof HTMLInputElement&&l(e,t.classList.contains("selected"))},1)}var l=function(e,t){t?(e.checked=!0,c.uncheckedClassNames&&e.classList.remove(...c.uncheckedClassNames),c.checkedClassNames&&e.classList.add(...c.checkedClassNames)):(e.checked=!1,c.checkedClassNames&&e.classList.remove(...c.checkedClassNames),c.uncheckedClassNames&&e.classList.add(...c.uncheckedClassNames))};a.hook("after","setupTemplates",()=>{var n=a.settings.render.option;a.settings.render.option=(e,t)=>{var t=getDom(n.call(a,e,t)),s=document.createElement("input"),e=(c.className&&s.classList.add(c.className),s.addEventListener("click",function(e){preventDefault(e)}),s.type="checkbox",hash_key(e[a.settings.valueField]));return l(s,!!(e&&-1<a.items.indexOf(e))),t.prepend(s),t}}),a.on("item_remove",e=>{e=a.getOption(e);e&&(e.classList.remove("selected"),n(e))}),a.on("item_add",e=>{e=a.getOption(e);e&&n(e)}),a.hook("instead","onOptionSelect",(e,t)=>{if(t.classList.contains("selected"))return t.classList.remove("selected"),a.removeItem(t.dataset.value),a.refreshOptions(),void preventDefault(e,!0);s.call(a,e,t),n(t)})}export{plugin as default};