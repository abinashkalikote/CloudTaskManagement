!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).drag_drop=t()}(this,function(){"use strict";const d=(e,t,r,o)=>{e.addEventListener(t,r,o)};const r={};var o,e={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(o in e){let t=e[o]||"";for(let e=0;e<t.length;e++){var n=t.substring(e,e+1);r[n]=o}}new RegExp(Object.keys(r).join("|")+"|[̀-ͯ·ʾʼ]","gu");const u=(e,t)=>{if(Array.isArray(e))e.forEach(t);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},c=e=>"string"==typeof e&&-1<e.indexOf("<");return function(){var l=this;if("multi"===l.settings.mode){var e=l.lock,t=l.unlock;let s=!0,i;l.hook("after","setupTemplates",()=>{var n=l.settings.render.item;l.settings.render.item=(e,t)=>{const a=(e=n.call(l,e,t)).jquery?e[0]:e instanceof HTMLElement?e:c(e)?((t=document.createElement("template")).innerHTML=e.trim(),t.content.firstChild):document.querySelector(e);r=a,t={draggable:"true"},u(t,(e,t)=>{null==e?r.removeAttribute(t):r.setAttribute(t,""+e)});var r,e=e=>{e.preventDefault(),a.classList.add("ts-drag-over"),o(a,i)};const o=(e,t)=>{var r,o,n;void 0!==t&&(((e,t)=>{do{if(e==(t=null==t?void 0:t.previousElementSibling))return!0}while(t&&t.previousElementSibling);return!1})(t,a)?(o=t,null!=(n=(r=e).parentNode)&&n.insertBefore(o,r.nextSibling)):(n=t,null!=(r=(o=e).parentNode)&&r.insertBefore(n,o)))};return d(a,"mousedown",e=>{var t,r;s||(r=!1,(t=e)&&(t.preventDefault(),r&&t.stopPropagation())),e.stopPropagation()}),d(a,"dragstart",e=>{i=a,setTimeout(()=>{a.classList.add("ts-dragging")},0)}),d(a,"dragenter",e),d(a,"dragover",e),d(a,"dragleave",()=>{a.classList.remove("ts-drag-over")}),d(a,"dragend",()=>{document.querySelectorAll(".ts-drag-over").forEach(e=>e.classList.remove("ts-drag-over")),null!=(e=i)&&e.classList.remove("ts-dragging"),i=void 0;var e,t=[];l.control.querySelectorAll("[data-value]").forEach(e=>{e.dataset.value&&(e=e.dataset.value)&&t.push(e)}),l.setValue(t)}),a}}),l.hook("instead","lock",()=>(s=!1,e.call(l))),l.hook("instead","unlock",()=>(s=!0,t.call(l)))}}});