!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).dropdown_input=o()}(this,function(){"use strict";const n={};var t,e={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(t in e){let o=e[t]||"";for(let e=0;e<o.length;e++){var r=o.substring(e,e+1);n[r]=t}}new RegExp(Object.keys(n).join("|")+"|[̀-ͯ·ʾʼ]","gu");const s=e=>{return e.jquery?e[0]:e instanceof HTMLElement?e:i(e)?((o=document.createElement("template")).innerHTML=e.trim(),o.content.firstChild):document.querySelector(e);var o},i=e=>"string"==typeof e&&-1<e.indexOf("<"),a=e=>{var o=[],n=e,t=e=>{"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(o=o.concat(e))};if(Array.isArray(n))n.forEach(t);else for(var r in n)n.hasOwnProperty(r)&&t(n[r],r);return o.filter(Boolean)},l=e=>e=Array.isArray(e)?e:[e];return function(){const i=this;i.settings.shouldOpen=!0,i.hook("before","setup",()=>{var e,o,n;i.focus_node=i.control,e=i.control_input,o=["dropdown-input"],n=a(o),(e=l(e)).map(o=>{n.map(e=>{o.classList.add(e)})});const t=s('<div class="dropdown-input-wrap">'),r=(t.append(i.control_input),i.dropdown.insertBefore(t,i.dropdown.firstChild),s('<input class="items-placeholder" tabindex="-1" />'));r.placeholder=i.settings.placeholder||"",i.control.append(r)}),i.on("initialize",()=>{i.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:return i.isOpen&&(n=!0,(o=e)&&(o.preventDefault(),n&&o.stopPropagation()),i.close()),void i.clearActiveItems();case 9:i.focus_node.tabIndex=-1}var o,n;return i.onKeyDown.call(i,e)}),i.on("blur",()=>{i.focus_node.tabIndex=i.isDisabled?-1:i.tabIndex}),i.on("dropdown_open",()=>{i.control_input.focus()});const o=i.onBlur;var e,n,t,r;i.hook("instead","onBlur",e=>{if(!e||e.relatedTarget!=i.control_input)return o.call(i)}),e=i.control_input,n="blur",t=()=>i.onBlur(),e.addEventListener(n,t,r),i.hook("before","close",()=>{i.isOpen&&i.focus_node.focus({preventScroll:!0})})})}});